<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<title>ä»»å‹™å›å ±æ¨¡æ¿ç”¢ç”Ÿå™¨</title>
<style>
        /* ====== åŸºæœ¬é é¢æ¨£å¼ ====== */
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 12px;
            padding: 20px 24px 32px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        h1 {
            text-align: center;
            margin: 0 0 1.2rem 0;
            font-size: 1.6rem;
        }

        h2 {
            font-size: 1.1rem;
            border-left: 4px solid #4a90e2;
            padding-left: 8px;
            margin: 1.5rem 0 .8rem 0;
        }

        .section,
        .title-section {
            background-color: #fafafa;
            padding: 12px 14px 16px;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        /* ====== è¡¨å–®åˆ— ====== */
        .form-row {
            display: flex;
            align-items: center;
            margin-bottom: 0.7rem;
            gap: 8px;
        }

        .form-row.vertical {
            flex-direction: column;
            align-items: flex-start;
        }

        .form-row label {
            min-width: 120px;
            font-weight: 500;
        }

        
        /* è®“è£ç½®å€å¡Šåœ¨ form-row ä¸­æ’æ»¿å‰©é¤˜å¯¬åº¦ï¼ˆAndroid ç€è¦½å™¨ç‰ˆæœ¬å¯å»¶ä¼¸è‡³æœ€å³å´ï¼‰ */
        .device-group {
            flex: 1;
            min-width: 0; /* é¿å… flex å­é …è¢«å…§å®¹æ’çˆ† */
            max-width: 696px; /* æ¯”ç…§ iOS å…¶ä»–å€å¡Šçš„å¯¦éš›å³ç·£ï¼ˆ120+260+300+gap*2ï¼‰ */ /* èˆ‡ iOS å…¶ä»–å€å¡Šçš„å¯¬åº¦ä¸€è‡´ï¼Œé¿å…éå¯¬ */
        }
        .device-group .device-row {
            width: 100%;
        }
/* ====== åŸºæœ¬ input æ¨£å¼ ====== */
        input[type="text"],
        input[type="date"],
        select,
        textarea {
            font-size: 0.95rem;
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        /* ====== menu-only inputsï¼ˆåƒ…é¸å–®ï¼Œä¸å…è¨±éµç›¤è¼¸å…¥ï¼‰ ====== */
        .menu-only{
            caret-color: transparent;
            cursor: pointer;
        }
        .menu-only::selection{ background: transparent; }


        textarea {
            width: 100%;
            resize: vertical;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", "Noto Sans TC", sans-serif;
            font-variant-east-asian: proportional-width;
        }

        /* ====== å¯Œæ–‡å­—ç·¨è¼¯å™¨ ====== */
        .rich-editor {
            width: 100%;
            border-radius: 6px;
            border: 1px solid #ccc;
            padding: 6px 8px;
            background-color: #fff;
            overflow-y: auto;
            font-size: .95rem;
        }
        .rich-editor.large { min-height: 140px; }
        .rich-editor.medium { min-height: 80px; }

        /* ====== autocomplete wrapper ====== */
        .autocomplete-wrapper {
            position: relative;
            flex: 1;
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0; right: 0;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            max-height: 200px;
            overflow-y: auto;
            display: none;
            z-index: 50;
        }

        .suggestion-item {
            padding: 6px 8px;
            cursor: pointer;
        }
        .suggestion-item:hover {
            background-color: #e6f2ff;
        }

        #title-preview {
            width: 100%;
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", "Noto Sans TC", sans-serif;
            font-variant-east-asian: proportional-width;
        }

        #full-preview {
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", "Noto Sans TC", sans-serif;
            font-variant-east-asian: proportional-width;
            background-color: #fdfdfd;
        }

        /* ====== è£ç½®æ¬„ä½ï¼ˆä¿æŒåŸæ¨£ï¼‰ ====== */
        .device-row {
            display: grid;
            grid-template-columns: 120px 300px 300px;
            align-items: center;
            gap: 8px;
        }

        #pc-row {
            grid-template-columns: 120px 300px;
        }

        #ios-row {
            grid-template-columns: 120px 300px;
        }

        /* ====== â­ iOS å­é¸é …ï¼ˆæ­£å¼ä¿®æ”¹ç‰ˆï¼‰ ====== */

        /* Safari / Chrome / å…¶ä»–æ•´çµ„å·¦ç§»ï¼Œèˆ‡ä½ åœ–ç‰‡ä¸€è‡´ */
        #ios-browser-wrapper {
            margin-left: 80px;   /* ä½ æ¸¬è©¦å¾Œç¢ºå®šçš„å€¼ */
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        /* Safari / Chrome â€” å·¦ 120pxï¼ˆcheckbox + labelï¼‰ã€å³å´ 260pxï¼ˆè¼¸å…¥æ¬„ä½ï¼‰ */
        .ios-browser-group .device-row {
            display: grid;
            grid-template-columns: 120px 260px; /* ä½ æ‰‹å‹•è©¦å‡ºçš„å®Œç¾æ¯”ä¾‹ */
            gap: 8px;
        }

        /* ====== å…¶ä»–ï¼ˆOtherï¼‰ä¸‰æ¬„ï¼Œåªèª¿æ•´é€™è¡Œï¼Œä¸å½±éŸ¿ Safari/Chrome ====== */
        .ios-extra-row {
            display: grid;
            grid-template-columns: 120px 260px 220px; /* å®Œå…¨å°é½Š Safari/Chrome + Android */
            gap: 8px;
        }

        /* â€œç€è¦½å™¨ï¼ˆä¾‹ï¼šEdgeï¼‰â€ æ¬„ä½ â†’ å’Œ Safari/Chrome ä¸€æ¨£å¯¬ */
        #ios-other-name {
            width: 260px;       /* â— ä¸åŠ  !important æ‰ä¸æœƒå¹²åˆ°å…¶ä»–æ¬„ä½ */
        }

        /* â€œä¾‹ï¼š121.0â€ æ¬„ä½ â†’ ä½ç½®å¾Œé€€ï¼Œå¯¬åº¦å›ºå®š 300px */
        #ios-other-version {
            width: 300px;       /* â— ç²¾æº–å°é½Š Android çš„ç€è¦½å™¨æ¬„ä½ */
        }

        /* === è¦†å¯«æŒ‰éˆ• UIï¼ˆä¾ç…§ä½ çš„åœ–ç‰‡æ¨£å¼ï¼‰=== */
        .button-row {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 20px 0;
        }

        .button-row button {
            padding: 10px 26px;
            border-radius: 999px;
            border: none;
            background-color: #4a90e2;
            color: #fff;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s ease-in-out;
        }

        .button-row button:hover {
            background-color: #357bd8;
        }

        .button-row button:active {
            transform: scale(0.96);
        }

        #problem-desc {
            width: 735px !important;
        }        

        #bug_def {
            width: 644px !important;
        }


                /* ====== BUG ç­‰ç´šï¼ˆä»»å‹™æ¨™é¡Œå€å¡Šï¼‰ ====== */
        .bug-level-layout{
            display: flex;
            flex-direction: column;   /* è¡¨æ ¼æ”¾åœ¨ä¸‹æ–¹ï¼Œä¸¦åƒæ»¿æ•´è¡Œå¯¬åº¦ */
            align-items: stretch;
            gap: 6px;                 /* è¡Œè·æ›´ç·Šå¯† */
            margin-top: 4px;
        }
        .bug-level-left{
            flex: 0 0 auto;
            min-width: 0;
        }
        .bug-level-left .form-row{
            margin-bottom: 0;
        }
        #bug-level{
            width: 160px;
        }
        .bug-level-table-wrap{
            width: 100%;
            max-width: 100%;
            overflow: hidden; /* å›ºå®šè¡¨æ ¼å¤§å° + ç¦æ­¢ä»»ä½•å·è»¸ */         /* è‹¥è¢å¹•å¤ªçª„ï¼Œæ”¹ç‚ºæ°´å¹³æ²å‹•é¿å…æ€ªæ›è¡Œ */
        }
        .bug-level-table{
            width: 100%;
            table-layout: fixed;      /* å›ºå®šç¸½å¯¬ï¼šæ¬„ä½åœ¨å›ºå®šå¯¬å…§åˆ†é… */
            min-width: 0;             /* ä¸å…è¨±æ’å¤§è¡¨æ ¼ */
            border-collapse: collapse;
            font-size: 0.86rem;
            background: #fff;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            overflow: hidden;
        }
        .bug-level-table th,
        .bug-level-table td{
            border: 1px solid #e1e1e1;
            padding: 6px 8px;
            vertical-align: top;
            line-height: 1.25;
            font-weight: 400;
            text-align: left;

            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .bug-level-table th{
            background: linear-gradient(180deg, #e8f0fa 0%, #dbe6f4 100%);
            color: #2f3b4a;
            border-bottom: 1px solid #cdd7e3;
            font-weight: 700;
            text-align: center;
            white-space: nowrap;
        }
        .bug-level-table td.bug-level{
            width: 52px;
            text-align: center;
            font-weight: 700;
            white-space: nowrap;
            vertical-align: middle;
        }
        /* ====== å·²é¸éŠæˆ²ï¼ˆæ©«å‘ chip æ¨£å¼ï¼‰ ====== */
        #selected-games {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }



        /* ====== éŠæˆ²æœå°‹æ¬„ä½ï¼šå¯¬åº¦è·Ÿè‘—æ–‡å­—ï¼ˆé¿å… placeholder è¢«æˆªæ–·ï¼Œä¹Ÿä¸ç•™å¤šé¤˜ç©ºç™½ï¼‰ ====== */
        #game-select{
            display: inline-block;
            width: auto;        /* å¯¦éš›å¯¬åº¦ç”± JS é‡æ¸¬å¾Œè¨­å®š */
            max-width: 100%;
        }

        /* ====== å·²é¸ç«™åˆ¥ï¼ˆchip é¡¯ç¤ºåœ¨é¸æ“‡æ¬„ä½å³å´ï¼‰ ====== */
        .site-inline-select{
            display: flex;
            align-items: flex-start;
            gap: 8px;
            flex: 1;
            min-width: 0;
        }
        .site-select-wrap{
            width: 220px;
            flex: 0 0 auto;
            position: relative;
        }
        .site-select-wrap input{ width: 100%; }
        #selected-sites{
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            min-height: 28px;
            align-content: flex-start;
            margin-top: 0px;
            flex: 1;
            min-width: 0;
        }

        /* === ç«™åˆ¥èˆ‡ç«™åˆ¥è¨­å®šå€å¡Šä¹‹é–“æ›´ç·Šå¯† === */
        .form-row:has(.site-inline-select){
            margin-bottom: 0.35rem;
        }
        .form-row:has(#site-config-container){
            margin-top: 0px;
        }


        .game-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 999px;
            background: #e6f2ff;
            color: #1f4fa3;
            font-size: 0.85rem;
        }
        .game-chip button {
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 0.9rem;
            line-height: 1;
            color: #1f4fa3;
        }
        .game-chip button:hover {
            color: #c00;
        }




        /* ====== ç«™åˆ¥è¨­å®šå€å¡Šï¼ˆèˆ‡ chip æ¨£å¼åšå€éš”ï¼‰ ====== */
        .site-config-container{ margin-top: 2px; width: 100%; }

        .site-config-card{
            background: #ffffff;
            border: 1px solid #e6e6e6;
            border-radius: 10px;
            padding: 8px 12px;
            margin: 6px 0 8px;
        }

        .site-config-header{
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 6px;
        }

        /* ç«™åˆ¥æ¨™é¡Œï¼šç”¨ã€Œå°æ¨™ç±¤/ç« ç¯€ã€é¢¨æ ¼ï¼Œé¿å…å’Œ chipï¼ˆè—è‰²è† å›Šï¼‰é•·å¾—ä¸€æ¨£ */
        .site-config-title{
            font-weight: 700;
            font-size: 0.92rem;
            color: #2b2b2b;
            background: #f3f3f3;
            border: 1px solid #e3e3e3;
            border-left: 4px solid #4a90e2;
            padding: 4px 10px;
            border-radius: 8px;
            line-height: 1.1;
        }

        .site-config-row{
            display: flex;
            align-items: flex-start;
            gap: 6px;
            margin-top: 0px;
        }
        .site-config-row label{
            min-width: 120px;
            font-weight: 500;
            padding-top: 6px;
        }

        .site-config-row .autocomplete-wrapper{ flex: 1; min-width: 0; }

        .site-config-row .field{ flex: 1; min-width: 0; }

        /* ç«™åˆ¥/å»³ä¸»/å¸³è™Ÿçš„å¤šé¸ chip å®¹å™¨ï¼šé ç•™ä¸€è¡Œé«˜åº¦ï¼Œé¿å…æ¨æ“  */
        .selected-chips{
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            /* é ç•™å…©è¡Œ chip é«˜åº¦ï¼šé¿å…åŠ å…¥å¾Œæ¨æ“ è† å›Šï¼›è¶…å‡ºå‰‡åœ¨å€å¡Šå…§æ²å‹• */
            min-height:  28px;
            max-height: 52px;
            overflow-y: auto;
            align-content: flex-start;
        }

        /* è®“å¡ç‰‡å…§å„å€å¡Šæ›´ç·Šå¯†ï¼šè¦†å¯« JS å…§è¯ marginTop=2pxï¼ˆé¿å… chip å€å¡Šèˆ‡ä¸Šä¸€è¡Œç•™ç™½éå¤šï¼‰ */
        .site-config-card .selected-chips{ margin-top: 1px !important; }

        /* æ¯ç«™åˆ¥ï¼šå»³ä¸»/å¸³è™Ÿä¸€å°ä¸€ç¶å®š UI */
        .pair-add-line{
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }
        .pair-add-line .pair-hall-wrap{ width: 260px; flex: 0 0 auto; }
        .pair-add-line .pair-account-wrap{ width: 240px; flex: 0 0 auto; }
        /* è©¦ç©æ¨¡å¼ï¼šä¿ç•™å¸³è™Ÿæ¬„å¯¬åº¦ä»¥å°é½Šç‰ˆé¢ï¼Œä½†ä¸é¡¯ç¤ºå…§å®¹ */
        .trial-empty{
            visibility: hidden;
            pointer-events: none;
        }
        .pair-add-line button{
            padding: 6px 10px;
            border-radius: 8px;
            border: 1px solid #cfd8e3;
            background: #f7f9fc;
            cursor: pointer;
        }
        .pair-add-line button:hover{ background:#eef3fb; }

        /* è®“æ‰€æœ‰ã€ŒåŠ å…¥ã€æŒ‰éˆ•ä¸€è‡´ï¼ˆå«è©¦ç©æ¨¡å¼çš„åŠ å…¥ï¼‰ */
        .pair-add-btn{
            padding: 6px 10px;
            border-radius: 8px;
            border: 1px solid #cfd8e3;
            background: #f7f9fc;
            cursor: pointer;
        }
        .pair-add-btn:hover{ background:#eef3fb; }

        /* æ¯ç«™åˆ¥ï¼šç‰ˆæœ¬ï¼ˆéŠæˆ²ç‰ˆæœ¬ / æŠ•æ³¨æ­·ç¨‹ç‰ˆæœ¬ï¼‰ */
        /* ç›®æ¨™ï¼šå‹¾é¸å¾Œå‡ºç¾è¼¸å…¥æ¡†æ™‚ä¸æ¨æ“ è† å›Šé«˜åº¦ â†’ å…ˆé ç•™è¼¸å…¥æ¡†é«˜åº¦ */
        .site-version-block{
            margin-top: 2px; /* æ›´ç·Šå¯† */
            display: flex;
            flex-direction: column;
            gap: 2px; /* æ›´ç·Šå¯† */
        }
        .site-version-line{
            /* è®“å…©å€‹è¼¸å…¥æ¡†èµ·é»å®Œå…¨å°é½Šï¼šå›ºå®šç¬¬ä¸€æ¬„å¯¬åº¦ */
            display: grid;
            grid-template-columns: 150px 300px;
            align-items: center;
            column-gap: 10px;
        }
        .site-version-line label{
            width: 150px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            margin: 0;
            white-space: nowrap;
        }
        .site-version-line .autocomplete-wrapper{
            width: 300px;
            flex: 0 0 auto;
            min-width: 0;
            display: block; /* æ°¸é ä¿ç•™ä½”ä½ï¼Œé¿å…å‹¾é¸å¾Œæ¨æ“  */
        }
        .site-version-line .autocomplete-wrapper.v-hidden{
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
        }

        /* è©¦ç©æ¨¡å¼ï¼ˆæ›åœ¨ç«™åˆ¥ä¸Šï¼‰ï¼šUI å°é½Šç‰ˆæœ¬è¼¸å…¥æ¡†èˆ‡åŠ å…¥æŒ‰éˆ• */
        .trial-line{
            display: grid;
            grid-template-columns: 260px 240px max-content; /* å°é½Šï¼šå»³ä¸»æ¬„ / å¸³è™Ÿæ¬„ / åŠ å…¥æŒ‰éˆ•ï¼ˆæŒ‰éˆ•ä¸æ‹‰ä¼¸ï¼‰ */
            align-items: center;
            column-gap: 6px; /* èˆ‡å»³ä¸»/å¸³è™ŸåŒæ¨£ç·Šå¯† */
        }
        .trial-line label{
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            margin: 0;
            white-space: nowrap;
        }
        .trial-line .autocomplete-wrapper{
            width: 240px; /* å°é½Šã€Œå¸³è™Ÿã€æ¬„ä½å¯¬åº¦ */
            flex: 0 0 auto;
            min-width: 0;
            display: block;
        }
        /* ç‚ºé¿å…æ¨æ“ ï¼šä½¿ç”¨ visibility ä¿ç•™é«˜åº¦ */
        .trial-line .autocomplete-wrapper.v-hidden,
        .trial-line .pair-add-btn.v-hidden{
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
        }

        .trial-line .pair-add-btn{
            justify-self: start;
            width: fit-content;
        }
                /* ç«™åˆ¥è¼¸å…¥æ¡†çŸ­ä¸€é»ï¼šå³å´ç•™çµ¦å·²é¸ chip */
        .site-select-wrap{ width: 220px; }
        .site-select-wrap input{ width: 100%; }

        /* ====== âœ… æ–°å¢ï¼šè£ç½®å‹è™Ÿæ¬„ä½ ====== */
        .device-row.with-model {
            grid-template-columns: 120px 220px 1fr;
        }
        .device-row.android.with-model {
            grid-template-columns: 120px 220px 140px 1fr;
        }
        
        /* Androidï¼šè®“å„æ¬„ä½ input å……æ»¿å„è‡ªçš„ grid æ¬„ä½ï¼Œé¿å…è¦–è¦ºé–“è·ä¸ä¸€è‡´ */
        .device-row.android.with-model .autocomplete-wrapper,
        .device-row.android.with-model input[type="text"]{
            width: 100%;
        }
        .device-row.android.with-model .autocomplete-wrapper input[type="text"]{
            width: 100%;
        }
/* PC åŸæœ¬å…©æ¬„ï¼Œæ”¹ç‚ºä¸‰æ¬„ï¼ˆlabel + å‹è™Ÿ + ç€è¦½å™¨ï¼‰ */
        #pc-row.with-model {
            grid-template-columns: 120px 220px 1fr;
        }
        /* iOS åŸæœ¬å…©æ¬„ï¼Œæ”¹ç‚ºä¸‰æ¬„ï¼ˆlabel + OS + å‹è™Ÿï¼‰ */
        #ios-row.with-model {
            grid-template-columns: 120px 220px 140px;
        }


        
        /* iOSï¼šé¿å…å‹è™Ÿè¢«æˆªçŸ­ï¼ˆè®“å‹è™Ÿæ¬„ä½å¯ä¼¸ç¸®ä¸¦æ’æ»¿ï¼‰ */
        #ios-row.with-model .autocomplete-wrapper,
        #ios-row.with-model .autocomplete-wrapper input[type="text"]{
            width: 100%;
        }
/* ====== ä¿®æ­£ï¼šiOS å‹è™Ÿ / ç³»çµ±ç‰ˆæœ¬éœ€åŒä¸€åˆ— ====== */
        .device-row.with-model .autocomplete-wrapper {
            flex: 0;
            width: auto;
        }


        /* ====== âœ… å›ºå®šï¼šä¿æŒ index_fixed7 çš„é«˜åº¦/é–“è·ï¼Œä¸¦è®“ã€Œç‰ˆæœ¬ã€è¼¸å…¥æ¡†å¯¬åº¦æ¯”ç…§ PC/Android æ¬„ä½ ====== */
        /* ç›®æ¨™ï¼š
           - ä¿æŒ fixed7ï¼šå…©è¡Œç‰ˆæœ¬ä¹‹é–“ gap=0ã€è¼¸å…¥æ¡†ç”¨ visibility åˆ‡æ›é¿å…æ¨æ“ 
           - ç‰ˆæœ¬è¼¸å…¥æ¡†å¯¬åº¦æ”¹ç‚ºèˆ‡ PC/Android çš„å–®ä¸€æ¬„ä½å¯¬åº¦ä¸€è‡´ï¼ˆ300pxï¼‰
        */

        :root{
            --std-field-w: 300px; /* PC/Android æ¬„ä½çš„æ¨™æº–å¯¬åº¦ï¼ˆdevice-row çš„ 300px æ¬„ä½ï¼‰ */
        }

        /* fixed7ï¼šåªè¦†å¯«ç‰ˆæœ¬é‚£ä¸€åˆ—çš„ column gapï¼ˆåŸæœ¬ inline gap:10px æœƒè®“å…©è¡Œè¡Œè·éå¤§ï¼‰ */
        .form-row:has(#version-game-check) > div[style*="flex-direction:column"]{
            gap: 0 !important;
        }

        /* fixed7ï¼šç‰ˆæœ¬è¼¸å…¥æ¡†å›ºå®šä½”ä½ï¼ˆä¸æ¨æ“ ï¼‰ */
        #version-game-wrapper,
        #version-bet-wrapper{
            display: block !important;      /* è¦†å¯« inline display:none */
            flex: 0 0 var(--std-field-w);   /* âœ… å¯¬åº¦æ¯”ç…§ PC/Android */
            width: var(--std-field-w);
            min-width: 0;
        }
        #version-game,
        #version-bet{
            width: 100%;                    /* å……æ»¿ä¸Šé¢çš„ 300px wrapper */
            min-width: 0;
        }

        /* æœªå‹¾é¸ï¼šéš±è—ä½†ä¿ç•™ç©ºé–“ï¼ˆä¸æ¨æ“ ï¼‰ */
        label:has(#version-game-check:not(:checked)) + #version-game-wrapper,
        label:has(#version-bet-check:not(:checked)) + #version-bet-wrapper{
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
        }
        /* å‹¾é¸ï¼šé¡¯ç¤º */
        label:has(#version-game-check:checked) + #version-game-wrapper,
        label:has(#version-bet-check:checked) + #version-bet-wrapper{
            visibility: visible;
            opacity: 1;
            pointer-events: auto;
        }


/* BUG ç­‰ç´šåƒè€ƒè¡¨ï¼šè®“å„²å­˜æ ¼å…§å®¹ç›¡é‡å–®è¡Œé¡¯ç¤ºï¼ˆä¸è¶³å‰‡æ°´å¹³æ²å‹•ï¼‰ */
.bug-ref-wrap{overflow-x:auto;}
.bug-ref-table{
  min-width: 1600px; /* æé«˜æœ€å°å¯¬åº¦ï¼Œé™ä½æ›è¡Œæ©Ÿç‡ */
  table-layout: auto;
}
.bug-ref-table th,
.bug-ref-table td{
  white-space: nowrap; /* å„²å­˜æ ¼å…§å®¹å–®è¡Œ */
  font-size: 13px;     /* ç¨å¾®ç¸®å°å­—é«”ä»¥é¿å…æ“æ“  */
  padding: 10px 12px;  /* èª¿æ•´å…§è· */
}

/* å®šç¾©æ¬„ä½ï¼šå…¨éƒ¨ç½®ä¸­ï¼ˆæ”¯æ´rowspanï¼‰ */
.bug-level-table th.bug-def,
.bug-level-table td.bug-def{
    text-align: center;
}

/* BUG ç­‰ç´šè¡¨ï¼šå…¨éƒ¨å…§å®¹ç½®ä¸­ï¼ˆç­‰ç´š / å®šç¾© / ç¯„ä¾‹ï¼‰ */
.bug-level-table th,
.bug-level-table td{
  text-align: center;
}
</style>
<style>
select option[disabled]{display:none;}
</style>
</head>
<body autocomplete="off">
<div class="container">
<h1>ä»»å‹™å›å ±æ¨¡æ¿ç”¢ç”Ÿå™¨</h1>
<!-- ä»»å‹™æ¨™é¡Œ -->
<div class="title-section">
<h2>ä»»å‹™æ¨™é¡Œ</h2>
<!-- éŠæˆ² -->
<div class="form-row">
<label>éŠæˆ²ï¼š</label>
<div class="autocomplete-wrapper">
<input autocomplete="new-password" id="game-select" name="nohistory-game" placeholder="æœå°‹éŠæˆ²ï¼ˆGameCodeæˆ–åç¨±ï¼‰ï¼Œå¯è¤‡é¸" type="text"/>
<div class="suggestions" id="game-suggestions"></div>
<div id="selected-games" style="margin-top:6px;font-size:0.9rem;color:#333;"></div>
</div>
</div>
<!-- å•é¡Œæè¿° -->
<div class="form-row">
<label>å•é¡Œæè¿°ï¼š</label>
<input autocomplete="new-password" id="problem-desc" name="nohistory-desc" placeholder="ç°¡è¿°æœ¬æ¬¡å•é¡Œ" type="text"/>
</div>
<!-- BUGç­‰ç´š -->
<div class="bug-level-layout">
<div class="bug-level-left">
<div class="form-row">
<label>BUGç­‰ç´šï¼š</label>
<select autocomplete="off" id="bug-level">
<option disabled="" selected="" value="">è«‹é¸æ“‡</option>
<option value="é«˜">é«˜</option>
<option value="ä¸­">ä¸­</option>
<option value="ä½">ä½</option>
</select>
</div>
</div>
<div class="bug-level-table-wrap">
<table aria-label="BUGç­‰ç´šåƒè€ƒ" class="bug-level-table">
<colgroup>
<col class="col-level" style="width:52px;"/>
<col class="col-def" style="width:65%;"/>
<col class="col-ex" style="width:35%;"/>
</colgroup>
<thead>
<tr>
<th>ç­‰ç´š</th>
<th class="bug-def">å®šç¾©</th>
<th>ç¯„ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td class="bug-level" rowspan="2">é«˜</td>
<td class="bug-def">æ ¸å¿ƒåŠŸèƒ½ç„¡æ³•ä½¿ç”¨ã€æœå‹™ä¸­æ–·ã€è³‡æ–™åš´é‡éŒ¯èª¤</td>
<td>ç„¡æ³•ç™»å…¥ã€é‡‘æµå¤±æ•—</td>
</tr>
<tr>
<td class="bug-def">éæ ¸å¿ƒæµç¨‹ä¸­æ–·ï¼Œä½†æœƒé€ æˆå¤§ç¯„åœä½¿ç”¨å½±éŸ¿</td>
<td>çå‹µéŒ¯èª¤ã€æµç¨‹å¡æ­»</td>
</tr>
<tr>
<td class="bug-level" rowspan="2">ä¸­</td>
<td class="bug-def">åŠŸèƒ½ç•°å¸¸ä½†å¯æ›¿ä»£ã€å¯ç¹é</td>
<td>é¡¯ç¤ºéŒ¯èª¤ã€æµç¨‹éœ€é‡ä¾†</td>
</tr>
<tr>
<td class="bug-def">åœ–ç‰‡é¡¯ç¤ºä¸å®Œæ•´</td>
<td>åˆ‡é‚Š/æœªç•™å®‰å…¨å€</td>
</tr>
<tr>
<td class="bug-level">ä½</td>
<td class="bug-def">é«”é©—æˆ–é¡¯ç¤ºå•é¡Œï¼Œä¸å½±éŸ¿ä¸»è¦åŠŸèƒ½</td>
<td>UI æ¨™ç¤ºæˆ–æ–‡æ¡ˆéŒ¯å­—</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<!-- åŸºæœ¬è³‡è¨Š -->
<div class="section">
<h2>åŸºæœ¬è³‡è¨Š</h2>
<div class="form-row">
<label>ç™¼ç”Ÿæ™‚é–“ï¼š</label>
<input autocomplete="new-password" id="incident_date" name="nohistory-date" type="date"/>
</div>
<div class="form-row">
<label>æ¸¬è©¦è€…ï¼š</label>
<div class="autocomplete-wrapper">
<input autocomplete="new-password" class="memory-input" data-memory-key="tester" id="tester" name="nohistory-tester" type="text"/>
<div class="suggestions"></div>
</div>
</div>
<div class="form-row">
<label>ç«™åˆ¥ï¼š</label>
<div class="site-inline-select">
<div class="autocomplete-wrapper site-select-wrap">
<input autocomplete="new-password" class="menu-only" id="site-select" inputmode="none" name="nohistory-site" placeholder="æœå°‹ç«™åˆ¥ï¼Œå¯è¤‡é¸" readonly="" type="text"/>
<div class="suggestions" id="site-suggestions"></div>
</div>
<div id="selected-sites"></div>
</div>
</div>
<div class="form-row">
<label>æ¸¬è©¦å»³ä¸»ï¼å¸³è™Ÿï¼š</label>
<div class="site-config-container" id="site-config-container"></div>
</div>
<!-- è£ç½® -->
<div class="form-row">
<label>è£ç½®ï¼š</label>
<div class="device-group">
<!-- PC -->
<div class="device-row" id="pc-row">
<label><input class="device-check" id="device-pc" type="checkbox" value="PC"/> PC</label>
<input autocomplete="new-password" class="browser-input" id="pc-browser" name="nohistory-pcb" placeholder="ç€è¦½å™¨ç‰ˆæœ¬" type="text"/>
</div>
<!-- Android -->
<div class="device-row android with-model"><label><input class="device-check" id="device-android" type="checkbox" value="Android"/> Android</label>
<div class="autocomplete-wrapper">
<input autocomplete="new-password" class="model-input memory-input" data-memory-key="android_model" id="android-model" name="nohistory-am" placeholder="è£ç½®å‹è™Ÿï¼ˆéå¿…è¦å¯ç•¥éï¼‰" type="text"/>
<div class="suggestions"></div>
</div>
<input autocomplete="new-password" class="os-input" id="android-os" name="nohistory-aos" placeholder="ç³»çµ±ç‰ˆæœ¬" type="text"/>
<input autocomplete="new-password" class="browser-input" id="android-browser" name="nohistory-ab" placeholder="ç€è¦½å™¨ç‰ˆæœ¬" type="text"/>
</div>
<!-- iOS -->
<div class="device-row with-model" id="ios-row">
<label><input class="device-check" id="ios-check" type="checkbox" value="iOS"/> iOS</label>
<div class="autocomplete-wrapper">
<input autocomplete="new-password" class="model-input memory-input" data-memory-key="ios_model" id="ios-model" name="nohistory-im" placeholder="è£ç½®å‹è™Ÿï¼ˆéå¿…è¦å¯ç•¥éï¼‰" type="text"/>
<div class="suggestions"></div>
</div>
<input autocomplete="new-password" class="os-input" id="ios-os" name="nohistory-ios" placeholder="ç³»çµ±ç‰ˆæœ¬" type="text"/>
</div>
</div>
</div>
<!-- iOS å­æ¬„ä½ï¼ˆå·²å¥—ç”¨ä½ è¦æ±‚çš„å·¦ç§» + å¯¬åº¦èª¿æ•´ï¼‰ -->
<div class="form-row" id="ios-browser-wrapper" style="display:none;">
<div class="ios-browser-group">
<div class="device-row">
<label><input class="ios-browser" id="ios-safari" type="checkbox"/>
                        Safari</label>
<input autocomplete="new-password" class="browser-version-input" id="ios-safari-version" name="nohistory-isv" placeholder="Safariç‰ˆæœ¬ç‚ºiOSç‰ˆæœ¬" readonly="" style="background:#ddd;color:#555;" type="text"/>
</div>
<div class="device-row">
<label><input class="ios-browser" id="ios-chrome" type="checkbox"/>
                        Chrome</label>
<input autocomplete="new-password" class="browser-version-input" id="ios-chrome-version" name="nohistory-icv" placeholder="ç€è¦½å™¨ç‰ˆæœ¬" type="text"/>
</div>
<div class="ios-extra-row">
<label>å…¶ä»–ï¼š</label>
<input autocomplete="new-password" class="browser-name-input" id="ios-other-name" name="nohistory-ion" placeholder="ç€è¦½å™¨ï¼ˆä¾‹ï¼šEdgeï¼‰" type="text"/>
<input autocomplete="new-password" class="browser-version-input" id="ios-other-version" name="nohistory-iov" placeholder="ç€è¦½å™¨ç‰ˆæœ¬" type="text"/>
</div>
</div>
</div>
<div class="form-row">
<label>æ³¨å–®ç·¨è™Ÿï¼š</label>
<input autocomplete="new-password" id="order_id" name="nohistory-order" placeholder="æœªæœ‰æ³¨å–®å¯è·³é" type="text"/>
</div>
</div>
<!-- æè¿°å…§å®¹ -->
<div class="section">
<h2>æè¿°å…§å®¹</h2>
<div class="form-row vertical">
<label>æ“ä½œï¼š</label>
<div class="rich-editor large" contenteditable="true" id="operation_editor"></div>
</div>
<div class="form-row vertical">
<label>å¯¦éš›çµæœï¼š</label>
<div class="rich-editor large" contenteditable="true" id="actual_editor"></div>
</div>
<div class="form-row vertical">
<label>é æœŸçµæœï¼š</label>
<div class="rich-editor large" contenteditable="true" id="expected_editor"></div>
</div>
<div class="form-row vertical">
<label>å‚™è¨»ï¼š</label>
<div class="rich-editor medium" contenteditable="true" id="remark_editor"></div>
</div>
</div>
<!-- æŒ‰éˆ• -->
<div class="button-row">
<button id="copy-title-btn">è¤‡è£½æ¨™é¡Œ</button>
<button id="copy-btn">ä¸€éµè¤‡è£½</button>
</div>
<!-- é è¦½ -->
<div class="section">
<h2>æ–‡å­—é è¦½</h2>
<input id="title-preview" readonly="" type="text"/>
<textarea id="full-preview" readonly="" rows="16"></textarea>
</div>
</div>
<!-- ===================== JS ======================= -->
<script>
/* è¨­å®šä»Šæ—¥æ—¥æœŸ */
function setToday(){
    const d=document.getElementById("incident_date");
    const today=new Date().toISOString().split("T")[0];
    d.value=today;
    d.max=today;
}

/* éŠæˆ²æ¸…å–® */
const gameList=[["Game101","ç˜‹ç‹‚å¯¦é©—å®¤"],["Game102","é–‹é‹é‡‘ç…"],["Game103","æ˜Ÿéš›å†’éšª"],
["Game104","ç²¾éˆå¥‡åœ’"],["Game105","åŠŸå¤«é«˜æ‰‹"],["Game106","æ·˜é‡‘æ¨‚"],["Game107","åœ‹ç‹çš„ç¥•å¯¶"],
["Game108","å—æ¥µä¸–ç•Œ"],["Game109","è’é‡å¤§è¥¿éƒ¨"],["Game110","è¶…ç´šçŒ´å­"],["Game111","åˆºå®¢å¯†ä»¤"],
["Game112","ç™½è›‡å‚³"],["Game113","ç¾å‘³ä¸€ç•ª"],["Game114","å¹¸é‹æ´¾ç¿ å…‹"],["Game115","é­šè¦èŸ¹ slot"],
["Game116","å±å’è¥¿éŠ"],["Game117","é¬¥å£«å‚³å¥‡"],["Game118","å°ç´…å¸½:é€é¤å¤§ä½œæˆ°"],["Game119","å¨éœ‡å…¬å ‚"],
["Game120","é­”æ³•å­¸åœ’"],["Game122","ç™¼å¤§æŸ´"],["Game139","é‡‘ç¦ç‘ç¸"],["Game123","å·¨ç¸é‡‘å‰›"],
["Game124","åˆ®åˆ®æ¨‚"],["Game125","å¥‡é–€éç”²"],["Game126","æ³°æ¿•æ§"],["Game127","æš¹ç¾…ç¥æ‹³"],
["Game128","å“¥å¸ƒæ—ç¤¦å‘"],["Game129","æ¹–ä¸­å¥³ç¥"],["Game130","å¤å¢“é©šé­‚"],["Game131","çµ•ä¸–ç¥å·"],
["Game132","ç¾…æ‘©è¡é‚£"],["Game133","éª°å¯¶"],["Game134","ç™¾å®¶æ¨‚"],["Game135","5PK"],
["Game136","æ°´æœæ¨‚åœ’"],["Game137","é å¤ç”Ÿç‰©"],["Game138","é­”è±†"],["Game121","21é»"],
["Game140","ç¥é†«ç™¾è‰å‚³"],["Game141","é¾å®®å¯¶è—"],["Game142","ç¶­äº¬å‚³å¥‡"],["Game143","å¤§ç¬‘å½Œå‹’"],
["Game144","æ—¥è¼ªå¯¶æ®¿"],["Game145","è¦å¡çˆ­å¥ªæˆ°"],["Game146","æ°¸æ†ä¹‹å»"],["Game147","é¾é–€è©¦ç·´"],
["Game148","éæ´²ç…ç‹"],["Game149","è¿è²¡ç¥"],["Game150","æ’’å“ˆæ‹‰å¥‡ç·£"],["Game151","ç‰›ç‰›å¨¶è¦ª"],
["Game152","é‡‘ç‰›ç™¼ç™¼ç™¼"],["Game153","é¦¬é›…æœ«æ—¥"],["Game154","é‡æ€§çš„æ¸´æœ›"],["Game155","æ—è›‹å¥½ä¾†å±‹"],
["Game156","æ‹›è²¡èšå¯¶"],["Game157","åŠ å‹’æ¯”å¥‡èˆª"],["Game158","ä¼¯åˆ©æ†ä¹‹æ˜Ÿ"],["Game159","æ·»é‹è²¡ç¥"],
["Game160","ä¸‰åœ‹ç¾¤é›„"],["Game161","JPéº»å°‡èƒ¡äº†"],["Game162","æ•²å‰é¼ "],["Game163","786 SLOT"],
["Game164","é¾ç  â€§ å¤©å‘½"],["Game165","åˆ®åˆ®æ¨‚2 é¾è€€ç„¡é™"],["Game166","åˆ®åˆ®æ¨‚3 ç¾Šç¾ŠderE"],
["Game167","åŸƒåŠç¥•å¯¶"],["Game168","æ“Šé¼“è¿ç¦"],["Game169","EDMè¿·å¹»"],["Game170","å››è±¡æ‹±è²¡"],
["Game171","å·«æ¯’å‚³èªª"],["Game172","èŠ±é–‹å¯Œè²´"],["Game173","é€Ÿåº¦èˆ‡æ¿€æƒ…"],["Game174","èŠ±å¼5PK"],
["Game175","ç¦è™è‡¨é–€"],["Game176","è¶…ç´šå°„é–€"],["Game177","DICE"],["Game178","é³³å‡°å‚³èªª"],
["Game179","ä¼Šç”¸ç‹åº§"],["Game180","é›»éŸ³å…”å…”"],["Game181","åéˆ”æ©Ÿ"],["Game182","è¿è²¡ç¥ 2"],
["Game183","æ·»é‹è²¡ç¥2"],["Game184","é»ƒé‡‘éº»å°‡"],["Game185","é‡‘éŠ€é¯‰"],["Game186","æ˜Ÿæµ·å¾æˆ°"],
["Game187","è½Ÿèœœå¤§ä½œæˆ°"],["Game188","çƒ½èµ·é›²æ¹§æ™‚"],["Game189","æµ·æ´‹ç‰©èª"],["Game190","å‘½é‹ä¹‹æ‰‹"],
["Game191","çˆ†ç„°è¶³çƒ"],["Game192","å¥½é‹é‡‘èŸ¾"],["Game193","F.T.Gæ¦®è€€å‰ç·š"],["Game194","æ‹‰å¯†"],
["Game195","æ­¦ç¥è¶™å­é¾"],["Game196","ç‰›è½‰éŒ¢å¤"],["Game197","æ±éƒŠçš‡é™µ"],["Game198","æ­¦è–é—œç¾½"],
["Game199","æƒ¡é­”ç”œå¿ƒ"],["Game200","å¤©ä½¿å¯¶è²"],["Game201","JPéº»å°‡èƒ¡äº†2"],["Game202","æ˜Ÿçˆ†å®‡å®™"],
["Game203","é»è›‡æˆé‡‘"],["Game204","å°ç¥å‚³å¥‡"],["Game205","é–‹é–€å¤§å‰"],["Game206","ç‰›è½‰éŒ¢å¤2"],
["Game207","è™å˜¯é¾åŸ"],["Game208","å°„é¾é–€"],["Game209","æ·»é‹è²¡ç¥3"],["Game210","çš‡å®¶è€è™æ©Ÿ"],
["Game211","è²¡ç¥å¦™"],["Game212","Lucky Guess"],["Game213","é‡‘è±ªé¯‰"],["Game214","è³½é¦¬å¨˜"],
["Game215","Xå‹é€£çˆ†ä¸­å¼"]];

/* --- autocomplete éŠæˆ²æœå°‹ï¼ˆâœ… è¤‡é¸ç‰ˆï¼‰ --- */
const gameInput=document.getElementById("game-select");
const gameSuggest=document.getElementById("game-suggestions");

// ====== éŠæˆ²æœå°‹æ¬„ä½è‡ªå‹•èª¿æ•´å¯¬åº¦ï¼ˆä¾ placeholder / è¼¸å…¥å…§å®¹é‡æ¸¬ï¼‰ ======
function _measureTextWidth(text, el){
    const cs = getComputedStyle(el);
    const font = `${cs.fontStyle} ${cs.fontVariant} ${cs.fontWeight} ${cs.fontSize} / ${cs.lineHeight} ${cs.fontFamily}`;
    const canvas = _measureTextWidth._c || (_measureTextWidth._c = document.createElement('canvas'));
    const ctx = canvas.getContext('2d');
    ctx.font = font;
    return ctx.measureText(text || '').width;
}

function _autoSizeInputToText(inputEl, text){
    const cs = getComputedStyle(inputEl);
    const pad = (parseFloat(cs.paddingLeft)||0) + (parseFloat(cs.paddingRight)||0);
    const border = (parseFloat(cs.borderLeftWidth)||0) + (parseFloat(cs.borderRightWidth)||0);
    let w = Math.ceil(_measureTextWidth(text, inputEl) + pad + border + 2); // +2: ä¿éšªé¿å…è¢«åƒå­—

    // ä¸è¦è¶…éçˆ¶å®¹å™¨å¯¬åº¦
    const parent = inputEl.parentElement;
    if(parent){
        const max = parent.clientWidth;
        if(max && w > max) w = max;
    }
    // é¿å…å¤ªçª„
    if(w < 120) w = 120;

    inputEl.style.width = w + 'px';
}

function autoSizeGameInput(){
    if(!gameInput) return;
    const text = (gameInput.value && gameInput.value.trim()) ? gameInput.value : gameInput.placeholder;
    _autoSizeInputToText(gameInput, text);
}


let selectedGames = []; // [{id,name}]

// åˆå§‹ + äº’å‹•æ™‚è‡ªå‹•èª¿æ•´æ¬„ä½å¯¬åº¦
autoSizeGameInput();
gameInput.addEventListener('input', autoSizeGameInput);
window.addEventListener('resize', () => {
    // è®“ reflow å¾Œå†é‡æ¸¬ä¸€æ¬¡
    requestAnimationFrame(autoSizeGameInput);
});


function renderSelectedGames(){
    const box = document.getElementById("selected-games");
    box.innerHTML = "";
    selectedGames.forEach((g, idx) => {
        const chip = document.createElement("div");
        chip.className = "game-chip";
        chip.textContent = `${g.id} ${g.name}`;

        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = "Ã—";
        btn.addEventListener("click", () => {
            selectedGames.splice(idx, 1);
            renderSelectedGames();
            updateTitle();
        });

        chip.appendChild(btn);
        box.appendChild(chip);
    });
}

function renderGameList(keyword=""){
    const kw=keyword.toLowerCase();
    gameSuggest.innerHTML="";

    const matches=gameList.filter(([id,name]) =>
        id.toLowerCase().includes(kw) || name.toLowerCase().includes(kw)
    );

    // æ¸…é™¤å…¨éƒ¨
    const blankDiv = document.createElement("div");
    blankDiv.className = "suggestion-item";
    blankDiv.textContent = "(æ¸…é™¤å…¨éƒ¨)";
    blankDiv.addEventListener("mousedown", () => {
        selectedGames = [];
        gameInput.value = "";
        autoSizeGameInput();
        renderSelectedGames();
        gameSuggest.style.display = "none";
        updateTitle();
    });
    gameSuggest.appendChild(blankDiv);

    matches.forEach(([id,name])=>{
        const div=document.createElement("div");
        div.className="suggestion-item";
        div.textContent=`${id} ${name}`;
        div.addEventListener("mousedown",()=>{
            if(!selectedGames.find(g => g.id === id)){
                selectedGames.push({id,name});
            }
            gameInput.value = "";
            autoSizeGameInput();
            renderSelectedGames();
            gameSuggest.style.display="none";
            updateTitle();
        });
        gameSuggest.appendChild(div);
    });

    gameSuggest.style.display = matches.length ? "block":"none";
}

gameInput.addEventListener("focus",()=>renderGameList(""));
gameInput.addEventListener("input",()=>{
    renderGameList(gameInput.value);
});
document.addEventListener("click",(e)=>{
    if(!gameInput.contains(e.target)) gameSuggest.style.display="none";
});



/* --- ç¬¦è™Ÿå…¨å½¢åŒ–ï¼ˆåƒ…è½‰æ› ASCII ç¬¦è™Ÿï¼‰ --- */
function toFullWidthSymbols(str){
    if (str == null) return "";
    return String(str)
        .replace(/\\/g, "ï¼¼")
        .replace(/\//g, "ï¼")
        .replace(/-/g, "ï¼")
        .replace(/:/g, "ï¼š")
        .replace(/;/g, "ï¼›")
        .replace(/,/g, "ï¼Œ")
        .replace(/\?/g, "ï¼Ÿ")
        .replace(/!/g, "ï¼")
        .replace(/\(/g, "ï¼ˆ")
        .replace(/\)/g, "ï¼‰")
        .replace(/\[/g, "ï¼»")
        .replace(/\]/g, "ï¼½")
        .replace(/\{/g, "ï½›")
        .replace(/\}/g, "ï½")
        .replace(/</g, "ï¼œ")
        .replace(/>/g, "ï¼")
        .replace(/\+/g, "ï¼‹")
        .replace(/=/g, "ï¼")
        .replace(/\*/g, "ï¼Š")
        .replace(/@/g, "ï¼ ")
        .replace(/#/g, "ï¼ƒ")
        .replace(/%/g, "ï¼…")
        .replace(/&/g, "ï¼†")
        .replace(/\^/g, "ï¼¾")
        .replace(/\|/g, "ï½œ")
        .replace(/"/g, "ï¼‚")
        .replace(/'/g, "ï¼‡")
        .replace(/~/g, "ï½")
        // æ—¥æœŸç¶­æŒåŠå½¢é€£å­—è™Ÿï¼ˆYYYY-MM-DDï¼‰
        .replace(/(\d{4})ï¼(\d{2})ï¼(\d{2})/g, "$1-$2-$3");
}
/* --- æ¨™é¡Œç”Ÿæˆ --- */
function updateTitle(){
    const desc=document.getElementById("problem-desc").value.trim();
    const bugLv = (document.getElementById("bug-level")?.value || "").trim();
    const bugEmoji = bugLv === "é«˜" ? "ğŸ”´" : (bugLv === "ä¸­" ? "ğŸŸ " : (bugLv === "ä½" ? "ğŸŸ¡" : ""));

    let result="";

    if (selectedGames.length){
        const gamePart = selectedGames.map(g => {
            const id = g.id.replace('Game','');
            return `${id}_${g.name}`;
        }).join("ã€");

        result = desc ? `${gamePart}_${desc}` : gamePart;
    } else if (desc){
        result = desc;
    }

    // BUG ç­‰ç´šç”¨ emoji æ”¾åœ¨æ¨™é¡Œæœ€å‰æ–¹ï¼ˆä¸å–®ç¨è¼¸å‡ºä¸€è¡Œï¼‰
    if (bugEmoji) {
        result = result ? `${bugEmoji} ${result}` : bugEmoji;
    }

    const __titleFW = toFullWidthSymbols(result);
    document.getElementById("title-preview").value = __titleFW;
    updateFullPreview();
}
document.getElementById("problem-desc").addEventListener("input",updateTitle);
document.getElementById("bug-level").addEventListener("change",updateTitle);

/* --- æ™ºèƒ½ OS è£œå­—é¦– --- */
function formatOS(prefix, value){
    value = value.trim();
    if (!value) return "";
    return `${prefix} ${value}`;
}

/* --- æ™ºèƒ½ç€è¦½å™¨åˆ¤æ–·ï¼ˆPC / Android å…±ç”¨ï¼‰ --- */
function formatBrowser(value){
    const v = value.trim();
    if (!v) return "";

    if (!/^[0-9.]+$/.test(v)){
        return `ç€è¦½å™¨ï¼š${v}`;
    }
    return `ç€è¦½å™¨ï¼šChrome ${v}`;
}

/* --- è£ç½®è³‡æ–™çµ„è£ï¼ˆå›å‚³æ¯è£ç½®ä¸€è¡Œå­—ä¸²ï¼‰ --- */

function getDeviceLines(){
    const lines = [];

    // å»é™¤ formatBrowser() å¯èƒ½è‡ªå¸¶çš„ã€Œç€è¦½å™¨ï¼šã€å‰ç¶´
    const normBrowser = (s) => (s || "").replace(/^ç€è¦½å™¨ï¼š\s*/, "").trim();
    const joinSlash = (arr) => arr.filter(Boolean).join("ï¼");

    const pcOn = document.getElementById("device-pc").checked;
    const androidOn = document.getElementById("device-android").checked;
    const iosOn = document.getElementById("ios-check").checked;

    const total = (pcOn?1:0) + (androidOn?1:0) + (iosOn?1:0);

    // PC è©³ç´°ï¼šChrome 111
    const getPC = () => {
        const br = normBrowser(formatBrowser(document.getElementById("pc-browser").value));
        return br || ""; // å…è¨±ç©º
    };

    // Android è©³ç´°ï¼šAndroid 456ï¼Chrome 789ï¼ˆå¦‚æœ‰å‹è™Ÿå‰‡ï¼šPixel 7ï¼Android 456ï¼Chrome 789ï¼‰
    const getAndroid = () => {
        const model = (document.getElementById("android-model").value || "").trim();
        const osVal = (document.getElementById("android-os").value || "").trim();
        const br = normBrowser(formatBrowser(document.getElementById("android-browser").value));

        const platform = osVal ? `Android ${osVal}` : "Android";
        const parts = [];
        if (model) parts.push(model);
        parts.push(platform);
        if (br) parts.push(br);

        return joinSlash(parts);
    };

    // iOS è©³ç´°ï¼šiOS 222ï¼Safari 222ã€Chrome 333ã€Egg 11451ï¼ˆå¦‚æœ‰å‹è™Ÿå‰‡ï¼šiPhone 13ï¼iOS 222ï¼...ï¼‰
    const getIOS = () => {
        const model = (document.getElementById("ios-model").value || "").trim();
        const osVal = (document.getElementById("ios-os").value || "").trim();

        const browsers = [];
        if (document.getElementById("ios-safari").checked) {
            const v = (document.getElementById("ios-safari-version").value || "").trim();
            browsers.push(v ? `Safari ${v}` : "Safari");
        }
        if (document.getElementById("ios-chrome").checked) {
            const v = (document.getElementById("ios-chrome-version").value || "").trim();
            browsers.push(v ? `Chrome ${v}` : "Chrome");
        }
        const on = (document.getElementById("ios-other-name").value || "").trim();
        const ov = (document.getElementById("ios-other-version").value || "").trim();
        if (on || ov) browsers.push(`${on || "å…¶ä»–"}${ov ? " " + ov : ""}`.trim());

        const platform = osVal ? `iOS ${osVal}` : "iOS";

        const parts = [];
        if (model) parts.push(model);
        parts.push(platform);
        if (browsers.length) parts.push(browsers.join("ã€"));

        return joinSlash(parts);
    };

    // ç„¡é¸æ“‡ï¼šç•¥éæ•´æ®µï¼ˆç”±å‘¼å«ç«¯è™•ç†ï¼‰
    if (!total) return lines;

    // å–®é¸ï¼šè‹¥æ˜¯ Android / iOSï¼Œä½¿ç”¨ã€Œï¼æ‰‹æ©Ÿï¼š...ã€å–®è¡Œï¼›è‹¥æ˜¯ PCï¼Œä½¿ç”¨ã€Œï¼PCï¼š...ã€å–®è¡Œ
    if (total === 1) {
        if (androidOn) {
            lines.push(`ï¼æ‰‹æ©Ÿï¼š${getAndroid()}`);
            return lines;
        }
        if (iosOn) {
            lines.push(`ï¼æ‰‹æ©Ÿï¼š${getIOS()}`);
            return lines;
        }
        if (pcOn) {
            const pc = getPC();
            lines.push(pc ? `ï¼PCï¼š${pc}` : "ï¼PC");
            return lines;
        }
    }

    // å¤šé¸ï¼šPC å–®åˆ—ï¼›æ‰‹æ©Ÿä¾é¸æ“‡æ•¸æ±ºå®šå‘ˆç¾ï¼ˆå–®é¸æ‰‹æ©Ÿï¼å–®è¡Œï¼›Android+iOSï¼ç¾¤çµ„å·¢ç‹€ï¼‰
    if (pcOn) {
        const pc = getPC();
        lines.push(pc ? `ï¼PCï¼š${pc}` : "ï¼PC");
    }

    // æ‰‹æ©Ÿåªæœ‰å–®é¸ï¼ˆä¸è«–æ˜¯å¦åŒæ™‚æœ‰ PCï¼‰â†’ å–®è¡Œå‘ˆç¾ï¼šï¼æ‰‹æ©Ÿï¼šiOS ... / Android ...
    if ((androidOn || iosOn) && !(androidOn && iosOn)) {
        if (androidOn) lines.push(`ï¼æ‰‹æ©Ÿï¼š${getAndroid()}`);
        if (iosOn) lines.push(`ï¼æ‰‹æ©Ÿï¼š${getIOS()}`);
        return lines;
    }

    // Android + iOS åŒæ™‚å‹¾é¸ â†’ æ‰‹æ©Ÿç¾¤çµ„å·¢ç‹€æ¢åˆ—
    if (androidOn && iosOn) {
        lines.push("ï¼æ‰‹æ©Ÿï¼š");
        lines.push(`ã€€ï¼${getAndroid()}`);
        lines.push(`ã€€ï¼${getIOS()}`);
    }

    return lines;
}

/* --- é è¦½å…§å®¹æ›´æ–° --- */

// âœ… åŒæ­¥ã€Œæ¯ç«™åˆ¥ç‰ˆæœ¬ã€DOM â†’ window.siteConfigsï¼ˆä¿éšªç”¨ï¼‰
function syncSiteVersionsFromDOM(){
    const sites = (window.selectedSites || []);
    sites.forEach(siteName => {
        const card = document.querySelector(`.site-config-card[data-site="${siteName}"]`);
        if(!card) return;
        const cfg = normSiteCfg(siteName);

        const gameChk = card.querySelector(`input[type="checkbox"][data-site="${siteName}"][data-vkey="gameEnabled"]`);
        const betChk  = card.querySelector(`input[type="checkbox"][data-site="${siteName}"][data-vkey="betEnabled"]`);
        const gameInp = card.querySelector(`input[type="text"][data-site="${siteName}"][data-vkey="game"]`);
        const betInp  = card.querySelector(`input[type="text"][data-site="${siteName}"][data-vkey="bet"]`);

        if(gameChk) cfg.versions.gameEnabled = !!gameChk.checked;
        if(betChk)  cfg.versions.betEnabled  = !!betChk.checked;
        if(gameInp) cfg.versions.game        = (gameInp.value || "").trim();
        if(betInp)  cfg.versions.bet         = (betInp.value || "").trim();
    });
}

function updateFullPreview(){
    const date = document.getElementById("incident_date").value;
    const dateDisp = (date || "").trim() || "-";
    const tester = document.getElementById("tester").value;
    const testerDisp = (tester || "").trim() || "-";
    const selectedSitesList = (window.selectedSites || []);
    const siteConfigs = (window.siteConfigs || {});
    const orderRaw = document.getElementById("order_id").value.trim();

    // âœ… ä¿éšªï¼šåŒæ­¥æ¯ç«™åˆ¥ç‰ˆæœ¬ï¼ˆé¿å…ç€è¦½å™¨è‡ªå‹•å›å¡« input ä½†æœªè§¸ç™¼ input äº‹ä»¶ï¼‰
    syncSiteVersionsFromDOM();

    const op = document.getElementById("operation_editor").innerText.trim();
    const act = document.getElementById("actual_editor").innerText.trim();
    const exp = document.getElementById("expected_editor").innerText.trim();
    const remark = document.getElementById("remark_editor").innerText.trim();

    const lines = [];

    // Header
    lines.push(`ç™¼ç”Ÿæ™‚é–“ï¼š${dateDisp}`);
    lines.push(`æ¸¬è©¦è€…ï¼š${testerDisp}`);
    lines.push(`ç«™åˆ¥ï¼š${selectedSitesList.length ? selectedSitesList.join("ã€") : "-"}`);
    lines.push("");

    
// æ¸¬è©¦å»³ä¸»ï¼å¸³è™Ÿ & ç‰ˆæœ¬ï¼ˆå–®ç«™åˆ¥ï¼šä¸é‡è¤‡ç«™åˆ¥åï¼›è¤‡æ•¸ç«™åˆ¥ï¼šç«™åˆ¥åº•ä¸‹å·¢ç‹€æ¢åˆ—ï¼‰
if (selectedSitesList.length === 0) {
    lines.push("æ¸¬è©¦å»³ä¸»ï¼å¸³è™Ÿï¼š");
    lines.push("ï¼-");
    lines.push("");
} else if (selectedSitesList.length === 1) {
    const siteName = selectedSitesList[0];
    const cfg = normSiteCfg(siteName);

    // æ¸¬è©¦å»³ä¸»ï¼å¸³è™Ÿï¼ˆè©¦ç©æ¨¡å¼å¯ç¨ç«‹å­˜åœ¨ï¼šè‹¥æ²’æœ‰ä¸€èˆ¬å»³ä¸»/å¸³è™Ÿï¼Œå°±ä¸è¼¸å‡º '-'ï¼Œç›´æ¥ç•¥éè©²å°æ®µï¼‰
    lines.push("æ¸¬è©¦å»³ä¸»ï¼å¸³è™Ÿï¼š");

    const pairs = (cfg.pairs && cfg.pairs.length) ? cfg.pairs : [];
    const trialOn = !!(cfg.trial && cfg.trial.enabled);

    if (pairs.length) {
        lines.push("ï¼å»³ä¸»ï¼å¸³è™Ÿï¼š");
        pairs.forEach(p => lines.push(`ã€€ï¼${p.hall}ï¼${p.account}`));
    }

    if (trialOn) {
        lines.push("ï¼è©¦ç©æ¨¡å¼ï¼š");
        const halls = (cfg.trial.halls && cfg.trial.halls.length) ? cfg.trial.halls : [];
        if (halls.length) halls.forEach(h => lines.push(`ã€€ï¼${h}`));
        else lines.push("ã€€ï¼-");
    }

    if (!pairs.length && !trialOn) {
        lines.push("ï¼-");
    }

    lines.push("");

    // ç‰ˆæœ¬ï¼šè‹¥æ­¤ç«™åˆ¥æ²’æœ‰å‹¾é¸ä»»ä½•ç‰ˆæœ¬ï¼Œæ•´æ®µç•¥éï¼ˆé¿å…ã€Œåªéœ€è¦è©¦ç©æ¨¡å¼ã€æ™‚å‡ºç¾ '-'ï¼‰
    {
        const v = cfg.versions || {};
        const hasAny = !!(v.gameEnabled || v.betEnabled);
        if (hasAny) {
            lines.push("ç‰ˆæœ¬ï¼š");
            if (v.gameEnabled) {
                const val = String(v.game || "").trim();
                lines.push(`ï¼éŠæˆ²ç‰ˆæœ¬ï¼š${val || "-"}`);
            }
            if (v.betEnabled) {
                const val = String(v.bet || "").trim();
                lines.push(`ï¼æŠ•æ³¨æ­·ç¨‹ç‰ˆæœ¬ï¼š${val || "-"}`);
            }
            lines.push("");
        }
    }
} else {
    // è¤‡æ•¸ç«™åˆ¥ï¼šç«™åˆ¥åº•ä¸‹å·¢ç‹€æ¢åˆ—
    lines.push("æ¸¬è©¦å»³ä¸»ï¼å¸³è™Ÿï¼š");
    selectedSitesList.forEach(siteName => {
        const cfg = normSiteCfg(siteName);

        lines.push(`ï¼${siteName}ï¼š`);

        const pairs = (cfg.pairs && cfg.pairs.length) ? cfg.pairs : [];
        const trialOn = !!(cfg.trial && cfg.trial.enabled);

        if (pairs.length) {
            lines.push("ã€€ï¼å»³ä¸»ï¼å¸³è™Ÿï¼š");
            pairs.forEach(p => lines.push(`ã€€ã€€ï¼${p.hall}ï¼${p.account}`));
        }

        if (trialOn) {
            lines.push("ã€€ï¼è©¦ç©æ¨¡å¼ï¼š");
            const halls = (cfg.trial.halls && cfg.trial.halls.length) ? cfg.trial.halls : [];
            if (halls.length) halls.forEach(h => lines.push(`ã€€ã€€ï¼${h}`));
            else lines.push("ã€€ã€€ï¼-");
        }

        if (!pairs.length && !trialOn) {
            lines.push("ã€€ï¼-");
        }
    });
    lines.push("");

    // ç‰ˆæœ¬ï¼ˆè¤‡é¸ï¼šåƒ…è¼¸å‡ºæœ‰å‹¾é¸ç‰ˆæœ¬çš„ç«™åˆ¥ï¼›è‹¥å…¨éƒ½æ²’å‹¾é¸å‰‡æ•´æ®µç•¥éï¼‰
    const anySiteHasVersion = selectedSitesList.some(siteName => {
        const v = (normSiteCfg(siteName).versions || {});
        return !!(v.gameEnabled || v.betEnabled);
    });

    if (anySiteHasVersion) {
        lines.push("ç‰ˆæœ¬ï¼š");
        selectedSitesList.forEach(siteName => {
            const cfg = normSiteCfg(siteName);
            const v = cfg.versions || {};
            const hasAny = !!(v.gameEnabled || v.betEnabled);
            if (!hasAny) return;

            lines.push(`ï¼${siteName}ï¼š`);
            if (v.gameEnabled) {
                const val = String(v.game || "").trim();
                lines.push(`ã€€ï¼éŠæˆ²ç‰ˆæœ¬ï¼š${val || "-"}`);
            }
            if (v.betEnabled) {
                const val = String(v.bet || "").trim();
                lines.push(`ã€€ï¼æŠ•æ³¨æ­·ç¨‹ç‰ˆæœ¬ï¼š${val || "-"}`);
            }
        });
        lines.push("");
    }
}

// è£ç½®ï¼ˆç©ºå…§å®¹æ•´æ®µç•¥éï¼‰

    const deviceLines = getDeviceLines();
    if (deviceLines.length) {
        lines.push("è£ç½®ï¼š");
        deviceLines.forEach(l => lines.push(l));
        lines.push("");
    }

    // æ³¨å–®ç·¨è™Ÿï¼ˆç©ºå…§å®¹æ•´æ®µç•¥éï¼‰
    if (orderRaw) {
        lines.push(`æ³¨å–®ç·¨è™Ÿï¼š${orderRaw}`);
        lines.push("");
    }

    // æ“ä½œ / å¯¦éš›çµæœ / é æœŸçµæœï¼ˆä¿ç•™æ®µè½çµæ§‹ï¼Œæ®µè½é–“å›ºå®šç©ºä¸€è¡Œï¼‰
    lines.push("æ“ä½œï¼š");
    if (op) lines.push(op);
    lines.push("");

    lines.push("å¯¦éš›çµæœï¼š");
    if (act) lines.push(act);
    lines.push("");

    lines.push("é æœŸçµæœï¼š");
    if (exp) lines.push(exp);

    if (remark) {
        lines.push("");
        lines.push("å‚™è¨»ï¼š");
        lines.push(remark);
    }

    document.getElementById("full-preview").value = toFullWidthSymbols(lines.join("\n"));
}

/* --- è¤‡è£½ --- */
document.getElementById("copy-title-btn").addEventListener("click",()=>{
    navigator.clipboard.writeText(document.getElementById("title-preview").value);
    alert("æ¨™é¡Œå·²è¤‡è£½ï¼");
});
document.getElementById("copy-btn").addEventListener("click",()=>{
    navigator.clipboard.writeText(document.getElementById("full-preview").value);
    alert("å…¨æ–‡å·²è¤‡è£½ï¼ˆä¸å«æ¨™é¡Œï¼‰ï¼");
});

/* --- è‡ªè¨‚è¨˜æ†¶ autocomplete --- */
function loadMemory(key){ try{return JSON.parse(localStorage.getItem(key))||[]}catch{return[]} }
function saveMemory(key,arr){ localStorage.setItem(key,JSON.stringify(arr)); }

function setupMemoryField(id,key){
    const input=document.getElementById(id);
    const wrap=input.closest(".autocomplete-wrapper");
    const box=wrap.querySelector(".suggestions");
    let list=loadMemory(key);

    function render(filter=""){
        const kw=filter.toLowerCase();
        box.innerHTML="";

        const matches=list.filter(v=>v.toLowerCase().includes(kw));
        matches.forEach(v=>{
            const div=document.createElement("div");
            div.className="suggestion-item";
            div.textContent=v;
            div.addEventListener("mousedown",()=>{
                input.value=v;
                box.style.display="none";
                updateFullPreview();
            });
            box.appendChild(div);
        });

        box.style.display = matches.length ? "block":"none";
    }

    input.addEventListener("focus",()=>render(""));
    input.addEventListener("input",()=>render(input.value));

    input.addEventListener("blur",()=>{
        const v=input.value.trim();
        if(v && !list.includes(v)){
            list.push(v);
            saveMemory(key,list);
        }
        setTimeout(()=>box.style.display="none",120);
    });
}

// ä¾›å‹•æ…‹ç”¢ç”Ÿçš„ input ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼šæ¯ç«™åˆ¥ç‰ˆæœ¬æ¬„ä½ï¼‰
function setupMemoryFieldElement(input,key){
    if(!input || !key) return;
    const wrap=input.closest(".autocomplete-wrapper");
    if(!wrap) return;
    const box=wrap.querySelector(".suggestions");
    if(!box) return;
    let list=loadMemory(key);

    function render(filter=""){
        const kw=filter.toLowerCase();
        box.innerHTML="";
        const matches=list.filter(v=>v.toLowerCase().includes(kw));
        matches.forEach(v=>{
            const div=document.createElement("div");
            div.className="suggestion-item";
            div.textContent=v;
            div.addEventListener("mousedown",()=>{
                input.value=v;
                box.style.display="none";
                updateFullPreview();
            });
            box.appendChild(div);
        });
        box.style.display = matches.length ? "block":"none";
    }

    input.addEventListener("focus",()=>render(""));
    input.addEventListener("input",()=>render(input.value));
    input.addEventListener("blur",()=>{
        const v=input.value.trim();
        if(v && !list.includes(v)){
            list.push(v);
            saveMemory(key,list);
        }
        setTimeout(()=>box.style.display="none",120);
    });
}



/* --- autocomplete ç«™åˆ¥æœå°‹ï¼ˆâœ… è¤‡é¸ç‰ˆï¼›å·²é¸ chip é¡¯ç¤ºåœ¨è¼¸å…¥æ¡†å³å´ï¼‰ --- */
const siteInput = document.getElementById("site-select");
const siteSuggest = document.getElementById("site-suggestions");

// âœ… ç«™åˆ¥ï¼šåƒ…é¸å–®ï¼ˆä¸å…è¨±æ–‡å­—è¼¸å…¥ï¼‰
if (siteInput){
    siteInput.readOnly = true;
    siteInput.setAttribute("inputmode","none");
    siteInput.classList.add("menu-only");
    siteInput.addEventListener("keydown", (e)=>{
        if (e.key !== "Tab" && e.key !== "Shift") e.preventDefault();
    });
    siteInput.addEventListener("click", ()=> renderSiteList(""));
}

const siteList = ["æ¸¬è©¦ç«™","æ­£å¼ç«™","é–‹ç™¼ç«™"];

window.selectedSites = window.selectedSites || [];
window.siteConfigs = window.siteConfigs || {}; // { [siteName]: {halls:[], pairs:[], versions:{...}} }

function normSiteCfg(siteName){
    if(!window.siteConfigs[siteName]){
        window.siteConfigs[siteName] = { halls: [], pairs: [], versions: { gameEnabled: false, game: "", betEnabled: false, bet: "" } };
    }
    const cfg = window.siteConfigs[siteName];
    if(!cfg.halls) cfg.halls = [];
    if(!cfg.pairs) cfg.pairs = [];
    if(!cfg.versions) cfg.versions = { gameEnabled: false, game: "", betEnabled: false, bet: "" };
    if(typeof cfg.versions.gameEnabled !== "boolean") cfg.versions.gameEnabled = false;
    if(typeof cfg.versions.betEnabled  !== "boolean") cfg.versions.betEnabled  = false;
    if(typeof cfg.versions.game !== "string") cfg.versions.game = "";
    if(typeof cfg.versions.bet  !== "string") cfg.versions.bet  = "";


// âœ… è©¦ç©æ¨¡å¼ï¼ˆæ›åœ¨ç«™åˆ¥ä¸Šï¼‰ï¼šæ¯ç«™åˆ¥å¯ç¨ç«‹å•Ÿç”¨è©¦ç©å»³ä¸»æ¸…å–®ï¼Œç‰ˆæœ¬æ²¿ç”¨è©²ç«™åˆ¥ç‰ˆæœ¬
if(!cfg.trial) cfg.trial = { enabled: false, halls: [] };
if(typeof cfg.trial.enabled !== "boolean") cfg.trial.enabled = false;
if(!Array.isArray(cfg.trial.halls)) cfg.trial.halls = [];
// èˆŠè³‡æ–™ç›¸å®¹ï¼šè‹¥æ›¾ç”¨ cfg.halls ä½œç‚ºè©¦ç©å»³ä¸»æ¸…å–®ï¼Œæ¬åˆ° cfg.trial.halls
if(Array.isArray(cfg.halls) && cfg.halls.length && (!cfg.trial.halls || !cfg.trial.halls.length)){
    cfg.trial.halls = cfg.halls.slice();
}

    // èˆŠç‰ˆç›¸å®¹ï¼šè‹¥æ›¾ä½¿ç”¨ accountsï¼ˆå·²åœç”¨ï¼‰ï¼Œå˜—è©¦è½‰ç‚º pairsï¼ˆä»¥ç´¢å¼•é…å°ï¼‰
    if(cfg.accounts && Array.isArray(cfg.accounts) && cfg.accounts.length && (!cfg.pairs || !cfg.pairs.length)){
        const halls = Array.isArray(cfg.halls) ? cfg.halls : [];
        const accs  = cfg.accounts;
        const pairs = [];
        const n = Math.min(halls.length, accs.length);
        for(let i=0;i<n;i++){
            const h = (halls[i]||"").trim();
            const a = (accs[i]||"").trim();
            if(h && a) pairs.push({ hall: h, account: a });
        }
        cfg.pairs = pairs;
    }

    return cfg;
}

function renderSelectedSites(){
    const box = document.getElementById("selected-sites");
    box.innerHTML = "";

    window.selectedSites.forEach((s, idx) => {
        const chip = document.createElement("div");
        chip.className = "game-chip";
        chip.textContent = s;

        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = "Ã—";
        btn.addEventListener("click", () => {
            window.selectedSites.splice(idx, 1);
            // åŒæ­¥åˆªé™¤è¨­å®š
            delete window.siteConfigs[s];
            renderSelectedSites();
            renderSiteConfigBlocks();
            updateFullPreview();
        });

        chip.appendChild(btn);
        box.appendChild(chip);
    });
}

function renderSiteList(keyword=""){
    const kw = keyword.trim().toLowerCase();
    siteSuggest.innerHTML = "";

    // æ¸…é™¤å…¨éƒ¨
    const clearDiv = document.createElement("div");
    clearDiv.className = "suggestion-item";
    clearDiv.textContent = "(æ¸…é™¤å…¨éƒ¨)";
    clearDiv.addEventListener("mousedown", () => {
        window.selectedSites = [];
        window.siteConfigs = {};
        siteInput.value = "";
        renderSelectedSites();
        renderSiteConfigBlocks();
        siteSuggest.style.display = "none";
        updateFullPreview();
    });
    siteSuggest.appendChild(clearDiv);

    const matches = siteList.filter(s => s.toLowerCase().includes(kw));
    matches.forEach((s) => {
        const div = document.createElement("div");
        div.className = "suggestion-item";
        div.textContent = s;
        div.addEventListener("mousedown", () => {
            // âœ… è¤‡é¸ç«™åˆ¥ï¼šæ¸¬è©¦ç«™ï¼æ­£å¼ç«™ï¼é–‹ç™¼ç«™ï¼ˆè©¦ç©æ¨¡å¼æ”¹ç‚ºç«™åˆ¥å…§çš„æ¨¡å¼é–‹é—œï¼‰
            if (!window.selectedSites.includes(s)) window.selectedSites.push(s);
            normSiteCfg(s);

            siteInput.value = "";
            renderSelectedSites();
            renderSiteConfigBlocks();
            siteSuggest.style.display = "none";
            updateFullPreview();
        });
        siteSuggest.appendChild(div);
    });

    siteSuggest.style.display = matches.length ? "block" : "none";
}

siteInput.addEventListener("focus", () => renderSiteList(""));
siteInput.addEventListener("input", () => renderSiteList(siteInput.value));
document.addEventListener("click", (e) => {
    if (!siteInput.contains(e.target)) siteSuggest.style.display = "none";
});

/* --- å„ç«™åˆ¥ï¼šå»³ä¸»ï¼å¸³è™Ÿï¼ˆå¯æœå°‹è¤‡é¸ï¼‰ --- */
const HALL_OPTIONS = ["TidyéŠæˆ²å•†æ¸¬è©¦å»³","TidyéŠæˆ²ç´šè·æ¸¬è©¦å»³","DB TEST"]; // å¯è‡ªè¡Œæ“´å……

function makeMultiSelect({
    container,
    options,
    placeholder,
    getSelected,
    setSelected,
    memoryKey
}){
    const wrap = document.createElement("div");
    wrap.className = "autocomplete-wrapper";

    const input = document.createElement("input");
    input.type = "text";
    input.autocomplete = "new-password";
    input.placeholder = placeholder;

    const sugg = document.createElement("div");
    sugg.className = "suggestions";

    const selectedBox = document.createElement("div");
    selectedBox.style.display = "flex";
    selectedBox.style.flexWrap = "wrap";
    selectedBox.style.gap = "4px";
    selectedBox.style.minHeight = "34px";
    selectedBox.style.visibility = "hidden";
    selectedBox.style.marginTop = "1px";

    wrap.appendChild(input);
    wrap.appendChild(sugg);

    container.appendChild(wrap);
    container.appendChild(selectedBox);

    let memList = [];
    if (memoryKey){
        try{ memList = JSON.parse(localStorage.getItem(memoryKey)) || []; }catch{ memList=[]; }
    }

    function saveMem(v){
        if(!memoryKey) return;
        if(v && !memList.includes(v)){
            memList.push(v);
            localStorage.setItem(memoryKey, JSON.stringify(memList));
        }
    }

    function renderSelected(){
        selectedBox.innerHTML = "";
        getSelected().forEach((v, idx) => {
            const chip = document.createElement("div");
            chip.className = "game-chip";
            chip.textContent = v;
            const btn = document.createElement("button");
            btn.type = "button";
            btn.textContent = "Ã—";
            btn.addEventListener("click", () => {
                const arr = getSelected().slice();
                arr.splice(idx, 1);
                setSelected(arr);
                renderSelected();
                updateFullPreview();
            });
            chip.appendChild(btn);
            selectedBox.appendChild(chip);
        });
        // âœ… é ç•™é«˜åº¦ä½†é¿å…ç©ºç™½å¤ªçªå…€ï¼šæ²’é¸é …æ™‚å…ˆéš±è—ï¼ˆä»ä¿ç•™é«˜åº¦ï¼‰
        selectedBox.style.visibility = getSelected().length ? "visible" : "hidden";
    }

    function renderSuggest(filter=""){
        const kw = filter.trim().toLowerCase();
        sugg.innerHTML = "";

        const all = (options || []).concat(memList);
        const uniq = Array.from(new Set(all));
        const matches = uniq.filter(v => v.toLowerCase().includes(kw));

        // æ¸…é™¤å…¨éƒ¨
        const clearDiv = document.createElement("div");
        clearDiv.className = "suggestion-item";
        clearDiv.textContent = "(æ¸…é™¤å…¨éƒ¨)";
        clearDiv.addEventListener("mousedown", () => {
            setSelected([]);
            input.value = "";
            sugg.style.display = "none";
            renderSelected();
            updateFullPreview();
        });
        sugg.appendChild(clearDiv);

        matches.forEach(v => {
            const div = document.createElement("div");
            div.className = "suggestion-item";
            div.textContent = v;
            div.addEventListener("mousedown", () => {
                const arr = getSelected().slice();
                if(!arr.includes(v)) arr.push(v);
                setSelected(arr);
                input.value = "";
                renderSelected();
                sugg.style.display = "none";
                saveMem(v);
                updateFullPreview();
            });
            sugg.appendChild(div);
        });

        sugg.style.display = matches.length ? "block" : "none";
    }

    input.addEventListener("focus", () => renderSuggest(""));
    input.addEventListener("input", () => renderSuggest(input.value));

    // å…è¨±ç›´æ¥è¼¸å…¥ Enter åŠ å…¥ï¼ˆé©ç”¨å¸³è™Ÿï¼‰
    input.addEventListener("keydown", (e) => {
        if (e.key === "Enter"){
            const v = input.value.trim();
            if(v){
                const arr = getSelected().slice();
                if(!arr.includes(v)) arr.push(v);
                setSelected(arr);
                input.value = "";
                renderSelected();
                saveMem(v);
                sugg.style.display = "none";
                updateFullPreview();
            }
            e.preventDefault();
        }
    });

    document.addEventListener("click", (e) => {
        if (!wrap.contains(e.target)) sugg.style.display = "none";
    });

    renderSelected();
    return { renderSelected };
}

function renderSiteConfigBlocks(){
    const host = document.getElementById("site-config-container");
    if(!host) return;
    host.innerHTML = "";

    (window.selectedSites || []).forEach(siteName => {
        const cfg = normSiteCfg(siteName);

        const card = document.createElement("div");
        card.className = "site-config-card";
        card.dataset.site = siteName;

        const header = document.createElement("div");
        header.className = "site-config-header";
        const title = document.createElement("div");
        title.className = "site-config-title";
        title.textContent = siteName;
        header.appendChild(title);
        card.appendChild(header);

        const row = document.createElement("div");
        row.className = "site-config-row";
        const field = document.createElement("div");
        field.className = "field";
        row.appendChild(field);
        card.appendChild(row);

        /* ====== ä¸€èˆ¬å»³ä¸»ï¼å¸³è™Ÿï¼ˆ1 å° 1ï¼‰ ====== */
        const addLine = document.createElement("div");
        addLine.className = "pair-add-line";

        // --- å»³ä¸»ï¼ˆmenu-onlyï¼‰ ---
        const hallWrap = document.createElement("div");
        hallWrap.className = "autocomplete-wrapper pair-hall-wrap";
        const hallInput = document.createElement("input");
        hallInput.type = "text";
        hallInput.autocomplete = "new-password";
        hallInput.placeholder = "é¸æ“‡å»³ä¸»";
        hallInput.readOnly = true;
        hallInput.setAttribute("inputmode","none");
        hallInput.classList.add("menu-only");
        const hallSugg = document.createElement("div");
        hallSugg.className = "suggestions";
        hallWrap.appendChild(hallInput);
        hallWrap.appendChild(hallSugg);

        // --- å¸³è™Ÿï¼ˆå¯è¼¸å…¥ + memoryï¼‰ ---
        const accWrap = document.createElement("div");
        accWrap.className = "autocomplete-wrapper pair-account-wrap";
        const accInput = document.createElement("input");
        accInput.type = "text";
        accInput.autocomplete = "new-password";
        accInput.placeholder = "è¼¸å…¥/æœå°‹å¸³è™Ÿ";
        const accSugg = document.createElement("div");
        accSugg.className = "suggestions";
        accWrap.appendChild(accInput);
        accWrap.appendChild(accSugg);

        const addBtn = document.createElement("button");
        addBtn.type = "button";
        addBtn.className = "pair-add-btn";
        addBtn.textContent = "åŠ å…¥";

        addLine.appendChild(hallWrap);
        addLine.appendChild(accWrap);
        addLine.appendChild(addBtn);

        const pairChipBox = document.createElement("div");
        pairChipBox.className = "selected-chips";
        pairChipBox.style.visibility = "hidden";
        pairChipBox.style.marginTop = "2px";

        field.appendChild(addLine);
        field.appendChild(pairChipBox);

        const renderHallSuggest = (filter="") => {
            const kw = filter.trim().toLowerCase();
            hallSugg.innerHTML = "";
            const matches = (HALL_OPTIONS||[]).filter(v => v.toLowerCase().includes(kw));
            matches.forEach(v => {
                const div = document.createElement("div");
                div.className = "suggestion-item";
                div.textContent = v;
                div.addEventListener("mousedown", () => {
                    hallInput.value = v;
                    hallSugg.style.display = "none";
                });
                hallSugg.appendChild(div);
            });
            hallSugg.style.display = matches.length ? "block" : "none";
        };

        const addPair = () => {
            const hall = hallInput.value.trim();
            const acc  = accInput.value.trim();
            if(!hall){
                alert("è«‹å…ˆé¸æ“‡å»³ä¸»");
                return;
            }
            if(!acc){
                alert("è«‹å…ˆè¼¸å…¥å¸³è™Ÿ");
                return;
            }
            const pairs = Array.isArray(cfg.pairs) ? cfg.pairs.slice() : [];
            // å…è¨±åŒä¸€ç«™åˆ¥åŠ å…¥å¤šçµ„å»³ä¸»ï¼å¸³è™Ÿï¼›é¿å…å®Œå…¨é‡è¤‡ï¼ˆåŒå»³ä¸»ï¼‹åŒå¸³è™Ÿï¼‰
            const dup = pairs.some(p => (p.hall||"").trim() === hall && (p.account||"").trim() === acc);
            if(!dup) pairs.push({ hall, account: acc });
            cfg.pairs = pairs;
            hallInput.value = "";
            accInput.value = "";
            renderPairs();
            updateFullPreview();
        };

        addBtn.addEventListener("click", addPair);

        hallInput.addEventListener("focus", () => renderHallSuggest(""));
        hallInput.addEventListener("input", () => renderHallSuggest(hallInput.value));
        hallInput.addEventListener("keydown", (e) => {
            if(e.key === "Enter"){
                addPair();
                e.preventDefault();
                return;
            }
            if (e.key !== "Tab" && e.key !== "Shift") e.preventDefault();
        });
        document.addEventListener("click", (e) => {
            if (!hallWrap.contains(e.target)) hallSugg.style.display = "none";
        });

        setupMemoryFieldElement(accInput, `account_${siteName}`);

        const renderPairs = () => {
            pairChipBox.innerHTML = "";
            const pairs = Array.isArray(cfg.pairs) ? cfg.pairs : [];
            pairChipBox.style.visibility = pairs.length ? "visible" : "hidden";
            pairs.forEach((p, idx) => {
                const chip = document.createElement("div");
                chip.className = "game-chip";
                chip.textContent = `${p.hall}ï¼${p.account}`;
                const btn = document.createElement("button");
                btn.type = "button";
                btn.textContent = "Ã—";
                btn.addEventListener("click", () => {
                    const arr = pairs.slice();
                    arr.splice(idx, 1);
                    cfg.pairs = arr;
                    renderPairs();
                    updateFullPreview();
                });
                chip.appendChild(btn);
                pairChipBox.appendChild(chip);
            });
        };
        renderPairs();

        /* ====== è©¦ç©æ¨¡å¼ï¼ˆæ›åœ¨ç«™åˆ¥ä¸Šï¼‰ ====== */
        // UIï¼šæ”¾åœ¨ç‰ˆæœ¬å€å¡Šæœ€ä¸Šæ–¹ï¼ˆåœ¨ã€ŒéŠæˆ²ç‰ˆæœ¬ã€ä¸Šé¢ï¼‰ï¼Œè¼¸å…¥æ¡†å°é½Šç‰ˆæœ¬è¼¸å…¥æ¡†ï¼ŒåŠ å…¥æŒ‰éˆ•å°é½Šä¸€èˆ¬åŠ å…¥æŒ‰éˆ•

        /* ====== ç‰ˆæœ¬ï¼ˆæ¯ç«™åˆ¥å„è‡ªè¨­å®šï¼‰ ====== */
        const vBlock = document.createElement("div");
        vBlock.className = "site-version-block";


        // --- è©¦ç©æ¨¡å¼ï¼ˆæ¯ç«™åˆ¥å¯ç¨ç«‹å•Ÿç”¨ï¼›ç‰ˆæœ¬æ²¿ç”¨è©²ç«™åˆ¥ç‰ˆæœ¬ï¼‰---
        const tLine = document.createElement("div");
        tLine.className = "trial-line";

        const tLab = document.createElement("label");
        const tChk = document.createElement("input");
        tChk.type = "checkbox";
        tChk.checked = !!(cfg.trial && cfg.trial.enabled);
        tLab.appendChild(tChk);
        tLab.appendChild(document.createTextNode(" è©¦ç©æ¨¡å¼"));
        tLine.appendChild(tLab);

        // å³å´ï¼šè©¦ç©å»³ä¸»é¸å–® + åŠ å…¥ï¼ˆå°é½Šå»³ä¸»/å¸³è™Ÿçš„ã€Œå¸³è™Ÿæ¬„ã€èˆ‡åŠ å…¥æŒ‰éˆ•ï¼‰
        const tHallWrap = document.createElement("div");
        tHallWrap.className = "autocomplete-wrapper";
        const tHallInput = document.createElement("input");
        tHallInput.type = "text";
        tHallInput.autocomplete = "new-password";
        tHallInput.placeholder = "é¸æ“‡å»³ä¸»";
        tHallInput.readOnly = true;
        tHallInput.setAttribute("inputmode","none");
        tHallInput.classList.add("menu-only");
        const tHallSugg = document.createElement("div");
        tHallSugg.className = "suggestions";
        tHallWrap.appendChild(tHallInput);
        tHallWrap.appendChild(tHallSugg);

        const tAddBtn = document.createElement("button");
        tAddBtn.type = "button";
        tAddBtn.className = "pair-add-btn";
        tAddBtn.textContent = "åŠ å…¥";

        tLine.appendChild(tHallWrap);
        tLine.appendChild(tAddBtn);

        // è©¦ç©å»³ä¸» chipsï¼ˆé ç•™é«˜åº¦é¿å…æ¨æ“ ï¼‰
        const tChipBox = document.createElement("div");
        tChipBox.className = "selected-chips";
        tChipBox.style.visibility = "hidden";
        tChipBox.style.marginTop = "2px";

        const renderTrialSuggest = (filter="") => {
            const kw = filter.trim().toLowerCase();
            tHallSugg.innerHTML = "";
            const matches = (HALL_OPTIONS||[]).filter(v => v.toLowerCase().includes(kw));
            matches.forEach(v => {
                const div = document.createElement("div");
                div.className = "suggestion-item";
                div.textContent = v;
                div.addEventListener("mousedown", () => {
                    tHallInput.value = v;
                    tHallSugg.style.display = "none";
                });
                tHallSugg.appendChild(div);
            });
            tHallSugg.style.display = matches.length ? "block" : "none";
        };

        const renderTrialHalls = () => {
            tChipBox.innerHTML = "";
            const halls = (cfg.trial && Array.isArray(cfg.trial.halls)) ? cfg.trial.halls : [];
            tChipBox.style.visibility = halls.length ? "visible" : "hidden";
            halls.forEach((h, idx) => {
                const chip = document.createElement("div");
                chip.className = "game-chip";
                chip.textContent = h;
                const btn = document.createElement("button");
                btn.type = "button";
                btn.textContent = "Ã—";
                btn.addEventListener("click", () => {
                    const arr = halls.slice();
                    arr.splice(idx, 1);
                    cfg.trial.halls = arr;
                    renderTrialHalls();
                    updateFullPreview();
                });
                chip.appendChild(btn);
                tChipBox.appendChild(chip);
            });
        };

        const addTrialHall = () => {
            const hall = tHallInput.value.trim();
            if(!hall){
                alert("è«‹å…ˆé¸æ“‡å»³ä¸»");
                return;
            }
            const halls = (cfg.trial && Array.isArray(cfg.trial.halls)) ? cfg.trial.halls.slice() : [];
            if(!halls.includes(hall)) halls.push(hall);
            cfg.trial.halls = halls;
            tHallInput.value = "";
            renderTrialHalls();
            updateFullPreview();
        };

        const applyTrialVisibility = () => {
            const on = !!tChk.checked;
            if(!cfg.trial) cfg.trial = { enabled: false, halls: [] };
            cfg.trial.enabled = on;
            // ç‚ºé¿å…æ¨æ“ ï¼šä½¿ç”¨ visibility ä¿ç•™é«˜åº¦
            tHallWrap.classList.toggle("v-hidden", !on);
            tHallWrap.style.pointerEvents = on ? "auto" : "none";
            tAddBtn.classList.toggle("v-hidden", !on);
            tAddBtn.style.pointerEvents = on ? "auto" : "none";
            tChipBox.style.visibility = (on && (cfg.trial.halls||[]).length) ? "visible" : "hidden";
            tChipBox.style.opacity = on ? "1" : "0";
            tChipBox.style.pointerEvents = on ? "auto" : "none";
        };

        tAddBtn.addEventListener("click", addTrialHall);
        tHallInput.addEventListener("focus", () => renderTrialSuggest(""));
        tHallInput.addEventListener("input", () => renderTrialSuggest(tHallInput.value));
        tHallInput.addEventListener("keydown", (e) => {
            if(e.key === "Enter"){
                addTrialHall();
                e.preventDefault();
                return;
            }
            if (e.key !== "Tab" && e.key !== "Shift") e.preventDefault();
        });
        document.addEventListener("click", (e) => {
            if (!tHallWrap.contains(e.target)) tHallSugg.style.display = "none";
        });

        tChk.addEventListener("change", () => {
            applyTrialVisibility();
            updateFullPreview();
        });

        renderTrialHalls();
        applyTrialVisibility();

        vBlock.appendChild(tLine);
        vBlock.appendChild(tChipBox);
        const makeVersionLine = (text, enabledKey, valueKey, memKey, placeholder) => {
            const line = document.createElement("div");
            line.className = "site-version-line";

            const lab = document.createElement("label");
            const chk = document.createElement("input");
            chk.type = "checkbox";
            chk.checked = !!cfg.versions[enabledKey];
            chk.dataset.site = siteName;
            chk.dataset.vkey = enabledKey;
            lab.appendChild(chk);
            lab.appendChild(document.createTextNode(" " + text));

            const wrap = document.createElement("div");
            wrap.className = "autocomplete-wrapper";
            if(!chk.checked) wrap.classList.add("v-hidden");

            const inp = document.createElement("input");
            inp.type = "text";
            inp.autocomplete = "new-password";
            inp.placeholder = placeholder;
            inp.value = (cfg.versions[valueKey] || "");
            inp.dataset.site = siteName;
            inp.dataset.vkey = valueKey;

            const sugg = document.createElement("div");
            sugg.className = "suggestions";

            wrap.appendChild(inp);
            wrap.appendChild(sugg);

            inp.disabled = !chk.checked;

            chk.addEventListener("change", () => {
                cfg.versions[enabledKey] = chk.checked;
                wrap.classList.toggle("v-hidden", !chk.checked);
                inp.disabled = !chk.checked;
                updateFullPreview();
            });
            inp.addEventListener("input", () => {
                cfg.versions[valueKey] = inp.value;
                updateFullPreview();
            });

            setupMemoryFieldElement(inp, memKey);

            line.appendChild(lab);
            line.appendChild(wrap);
            return line;
        };

        vBlock.appendChild(
            makeVersionLine(
                "éŠæˆ²ç‰ˆæœ¬",
                "gameEnabled",
                "game",
                `version_game_${siteName}`,
                "è¼¸å…¥éŠæˆ²ç‰ˆæœ¬è™Ÿç¢¼"
            )
        );

        vBlock.appendChild(
            makeVersionLine(
                "æŠ•æ³¨æ­·ç¨‹ç‰ˆæœ¬",
                "betEnabled",
                "bet",
                `version_bet_${siteName}`,
                "è¼¸å…¥æŠ•æ³¨æ­·ç¨‹ç‰ˆæœ¬è™Ÿç¢¼"
            )
        );

        field.appendChild(vBlock);

        host.appendChild(card);
    });
}

/* --- åˆå§‹åŒ– --- */
window.addEventListener("DOMContentLoaded",()=>{
    setToday();

    // è‡ªå‹•åŒæ­¥ iOS OS ç‰ˆæœ¬åˆ° Safari æ¬„ä½
    document.getElementById("ios-os").addEventListener("input", () => {
        const os = document.getElementById("ios-os").value.trim();
        document.getElementById("ios-safari-version").value = os;
    });

    // è¨˜æ†¶æ¬„ä½
    setupMemoryField("tester","tester");
    setupMemoryField("android-model","android_model");
    setupMemoryField("ios-model","ios_model");

    // ç«™åˆ¥åˆå§‹æ¸²æŸ“
    renderSelectedSites();
    renderSiteConfigBlocks();

    // æ§åˆ¶ iOS å­æ¬„ä½é¡¯ç¤º
    const syncIosBlock = () => {
        const ios = document.getElementById("ios-check").checked;
        document.getElementById("ios-browser-wrapper").style.display = ios ? "flex" : "none";
    };
    syncIosBlock();
    document.querySelectorAll(".device-check").forEach(chk=>{
        chk.addEventListener("change",()=>{
            syncIosBlock();
            updateFullPreview();
        });
    });

    // iOS å­ç€è¦½å™¨æ›´æ–°
    document.querySelectorAll(".ios-browser").forEach(chk=>{
        chk.addEventListener("change",updateFullPreview);
    });

    // åŸºæœ¬æ¬„ä½
    [
        "incident_date","tester","order_id",
        "problem-desc",
        "operation_editor","actual_editor","expected_editor","remark_editor"
    ].forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.addEventListener("input", ()=>{
            if(id === "problem-desc") updateTitle();
            updateFullPreview();
        });
    });

    // è£ç½®æ¬„ä½
    [
        "pc-browser",
        "android-model","android-os","android-browser",
        "ios-os","ios-model",
        "ios-safari-version","ios-chrome-version",
        "ios-other-name","ios-other-version"
    ].forEach(id=>{
        const el=document.getElementById(id);
        if(el) el.addEventListener("input",updateFullPreview);
    });

    updateTitle();
    updateFullPreview();
});
</script>
<script>
(function(){
  function applyBugTableTooltips(){
    var cells = document.querySelectorAll('.bug-level-table th, .bug-level-table td');
    cells.forEach(function(el){
      el.removeAttribute('title');
      // åªåœ¨çœŸçš„è¢«çœç•¥æ™‚æ‰åŠ  titleï¼ˆæ–¹ä¾¿æŸ¥çœ‹å®Œæ•´æ–‡å­—ï¼‰
      if (el.scrollWidth > el.clientWidth) {
        el.setAttribute('title', (el.textContent || '').trim());
      }
    });
  }
  window.addEventListener('load', function(){
    requestAnimationFrame(applyBugTableTooltips);
  });
  window.addEventListener('resize', function(){
    requestAnimationFrame(applyBugTableTooltips);
  });
})();
</script>
</body>
</html>
